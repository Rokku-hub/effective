#Effective java
--------------------------
### 2장
##### 항목 - 생성자 대신 정적 팩토리 메서드를 고려하라
---
클래스는 클라이언트 public 생성자 대신 (혹은 생성자와 함께) 정적 팩터리 메서드를 제공할 수 있다.
이 방식에는 장점과 단점이 모두 존재한다. 먼저 정적 팩터리 메서드가 생성자보다 좋은 장점 다섯 가지를 알아보자

##### 첫 번째, 이름을 가질 수 있다.
 생성자에 넘기는 매개변수와 생성자 생성자 자체만으로 반환된 객체의 특성을 제대로 설명하지 못한다.
 
반면 정적 팩터리는 이름만 잘 지으면 반환될 객체의 특성을 쉽게 묘사할 수 있다.

 하나의 시그니처로는 생성자를 하나만 만들 수 있다. 입력 매개변수들의 순서를 다르게 한 생성자를 새로 추가하는 식으로 이 제한을 피해볼 수도 있지만,
좋지 않은 발상이다. 

그런 API를 사용하는 개발자는 각 생성자가 어떤 역할을 하는지 정확히 기억하기 어려워 엉뚱한 것을 호출하는 실수를 할 수 있다.
코드를 읽는 사함도 클래스를 설면 문서를 찾아보지 않고는 의미를 알지 못할 것이다.

이름을 가질 수 있는 정적 팩터리 메서드에는 이런 제약이 없다. ___한 클래스에 시그니처가 같은 생성자가 여러 개 필요할 것 같으면__, 생성자를 정적 팩터리 메서드로 바꾸고 각각의 차이를 잘 드러내는 이름을 지어즈자.

##### 두 번째, 호출될 때마다 인스턴스를 새로 생성하지 않아도 된다.
 이 덕분에 불변 클래스는 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 __캐싱하여__ 재활용하는 식으로 불필요한 객체 생서을 피할수 있다. 대표저인 예인 __Boolean.valueOf(boolean)__ 메서드는 객체를 아예 생성하지 않는다.

 따라서 (특히 생성 비용이 큰) 같은 객체가 자주 요청되는 상황이라면 성능을 상당히 끌어올려 준다. ___플라이웨이트 패턴(Flyweight pattern)__ 도 이와 비슷한 기법이라 할 수 있다.

------------------------------
##### 정적 팩터리 메서드에 흔히 사용하는 명명 방식들

* __from:__ 매개변수를 하나 받아서 해당 타입의 인스턴스를 반환하는 형변환 메서드
  * 예) Date d = Date.from(instance)
* __of:__ 여러 매개변수를 받아 적합한 타입의 인스턴스를 반환하는 집게 메서드
  * 예) Set<Rank> faceCards = EnumSet.of(JACK, QUEEN, KING);
* __valueOf:__ from과 of의 더 자세한 버전
  * 예) BigInteger prime = BigInteger.valueOf(Insteger.MAX_VALUE);
* __instance__ 혹은 __getInstance:__ (매개변수를 받는다면) 매개변수로 명시한 인스턴스를 반환하지만, 같은 인스턴스임을 보장하지 않는다.
  * 예) StackWalker luck = StackWalker.getInstance(options);
* __create__ 혹은 __newInstance:__ instance 혹은 getInstance와 같지만, 매번 새로운 인스턴스를 생성해 반환함을 보장한다.
  * 예) Object newArray = Array.newInstance(classObject, arrayLen);
* __getType:__ getInstance와 같으나, 생성할 클래스가 아닌 다른 클래스에 팩터리 메서드를 정의할 때 쓴다. "Type"은 팩터리 메서드가 반환할 객체의 타입이다.
  * 예) FileStore fs = Files.getFileStore(path);
* __newType:__ newInstance와 같으나, 생성할 클래스가 아닌 다른 클래스에 팩터리 메서드를 저의할 때 쓴다. "Type"은 팩터리 메서드가 반환할 객체의 타입이다.
  * 예) BufferedReader br = Files.newBufferedReader(path);
* __type:__ getType과 newType의 간결한 버전
  * 예) List<Complaint> litany = Collections.list(legacyLitany);

```
핵심 정리

정적 팩터리 메서드와 public 생성자는 각자의 쓰임새가 있으니 상대적인 장단점을 이용해고 사용하는 것이 좋다.
그렇다고 하더라도 정적 팩터리를 사용하는 게 유리한 경우가 더 많으므로 무작정 public 생성자를 제공하던 습관이 있더면 고치자.
```
 

